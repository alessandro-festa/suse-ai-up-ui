"use strict";(("undefined"!==typeof self?self:this)["webpackChunksuseai_rancher_ext_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunksuseai_rancher_ext_0_1_0"]||[]).push([[318],{271:function(e,t,a){a.d(t,{adapterAPI:function(){return d}});var r=a(5821),i=a(5100),s=a(3894),n=a(4364);class o extends r.y{constructor(e){super(e)}getAuthHeaders(){return null}updateBaseURL(){this.api.defaults.baseURL=s.Id.MCP_GATEWAY}getBaseURL(){return this.api.defaults.baseURL}async create(e){try{i.v.info("Creating adapter",{name:e.name,serverId:e.mcpServerId});const t=await this.post("/api/v1/adapters",e);return i.v.info("Adapter created",{id:t.id,name:t.name}),t}catch(t){throw i.v.error("Failed to create adapter",t),t}}async list(){try{i.v.info("Listing adapters");const e=await this.get("/api/v1/adapters");let t;if(Array.isArray(e))t=e;else if(e&&Array.isArray(e.adapters))t=e.adapters;else if(e&&"object"===typeof e){const a=Object.values(e).find(e=>Array.isArray(e));t=a||[]}else t=[];return i.v.info("Adapters listed",{count:t.length}),t}catch(e){throw i.v.error("Failed to list adapters",e),n.error("Adapter list error:",e),e}}async getAdapter(e){try{i.v.info("Getting adapter",{id:e});const t=await this.get(`/api/v1/adapters/${e}`);return i.v.info("Adapter retrieved",{id:e,name:t.name}),t}catch(t){throw i.v.error("Failed to get adapter",{id:e,error:t}),t}}async update(e,t){try{i.v.info("Updating adapter",{id:e});const a=await this.put(`/api/v1/adapters/${e}`,t);return i.v.info("Adapter updated",{id:e,name:a.name}),a}catch(a){throw i.v.error("Failed to update adapter",{id:e,error:a}),a}}async deleteAdapter(e){try{i.v.info("Deleting adapter",{id:e}),await this.delete(`/api/v1/adapters/${e}`),i.v.info("Adapter deleted",{id:e})}catch(t){throw i.v.error("Failed to delete adapter",{id:e,error:t}),t}}async sync(e){try{i.v.info("Syncing adapter capabilities",{id:e});const t=await this.post(`/api/v1/adapters/${e}/sync`);return i.v.info("Adapter capabilities synced",{id:e}),t}catch(t){throw i.v.error("Failed to sync adapter capabilities",{id:e,error:t}),t}}}const d=new o({baseURL:s.Id.MCP_GATEWAY,timeout:3e4,retries:3})},3894:function(e,t,a){a.d(t,{$Q:function(){return o},Id:function(){return n},Jh:function(){return p},S$:function(){return d},gg:function(){return u}});var r=a(9274);const i=(e,t=!1)=>{const a=t?"https":"http",r=t?38911:8911,i=t?38911:8911,s=t?38911:8911;if(e){const t=new URL(e),n=t.hostname;return{MCP_GATEWAY:`${a}://${n}:${r}`,DISCOVERY:`${a}://${n}:${i}`,PROXY:`${a}://${n}:${s}`,REGISTRY:`http://${n}:8911`,PLUGINS:`http://${n}:8914`,VIRTUAL_MCP:`http://${n}:8911/api/v1`,SMART_AGENTS:`http://${n}:8910`,RANCHER:window.location.origin}}const n="undefined"!==typeof window?window.location.hostname:"localhost";return{MCP_GATEWAY:`${a}://${n}:${r}`,DISCOVERY:`${a}://${n}:${i}`,PROXY:`${a}://${n}:${s}`,REGISTRY:`http://${n}:8911`,PLUGINS:`http://${n}:8914`,VIRTUAL_MCP:`http://${n}:8911/api/v1`,SMART_AGENTS:`http://${n}:8910`,RANCHER:window.location.origin}},s=(0,r.ref)(!1),n=(0,r.reactive)(i()),o=(e,t)=>{const a=void 0!==t?t:s.value,r=i(e,a);return Object.assign(n,r),r},d={ADAPTERS:"/api/v1/adapters",ADAPTER_DETAILS:e=>`/api/v1/adapters/${e}`,ADAPTER_STATUS:e=>`/api/v1/adapters/${e}/status`,ADAPTER_LOGS:e=>`/api/v1/adapters/${e}/logs`,ADAPTER_UPDATE:e=>`/api/v1/adapters/${e}`,ADAPTER_DELETE:e=>`/api/v1/adapters/${e}`,ADAPTER_HEALTH:e=>`/api/v1/adapters/${e}/health`,SESSIONS:e=>`/api/v1/adapters/${e}/sessions`,SESSIONS_REINITIALIZE:e=>`/api/v1/adapters/${e}/sessions`,ADAPTER_TOKEN:e=>`/api/v1/adapters/${e}/token`,ADAPTER_TOKEN_REFRESH:e=>`/api/v1/adapters/${e}/token/refresh`,ADAPTER_TOKEN_VALIDATE:e=>`/api/v1/adapters/${e}/token/validate`,ADAPTER_CLIENT_TOKEN:e=>`/api/v1/adapters/${e}/client-token`,ADAPTER_TEST_AUTH:e=>`/api/v1/adapters/${e}/test-auth`,ADAPTER_VALIDATE_AUTH:e=>`/api/v1/adapters/${e}/validate-auth`,ADAPTER_SSE:e=>`/api/v1/adapters/${e}/sse`,ADAPTER_MESSAGES:e=>`/api/v1/adapters/${e}/messages`,ADAPTER_MCP:e=>`/api/v1/adapters/${e}/mcp`,ADAPTER_WEBSOCKET:e=>`/api/v1/adapters/${e}/ws`,DISCOVERY_SCAN:"/api/v1/discovery/scan",DISCOVERY_SERVERS:"/api/v1/discovery/servers",DISCOVERY_RESULTS:"/api/v1/discovery/results",DISCOVERY_SERVER_DETAILS:e=>`/api/v1/discovery/results/${e}`,DISCOVERY_REGISTER:"/api/v1/discovery/register",SCAN_START:"/api/v1/discovery/scan",SCAN_STATUS:e=>`/api/v1/discovery/scan/${e}`,SERVERS:"/api/v1/servers",REGISTER_SERVER:"/api/v1/registry/upload",REGISTRY_BROWSE:"/api/v1/registry/browse",REGISTRY_PUBLIC:"/api/v1/registry/browse",REGISTRY_SYNC_OFFICIAL:"/api/v1/registry/reload",REGISTRY_UPLOAD:"/api/v1/registry/upload",REGISTRY_UPLOAD_BULK:"/api/v1/registry/upload",REGISTRY_UPLOAD_LOCAL_MCP:"/api/v1/registry/upload",REGISTRY_DETAILS:e=>`/api/v1/registry/${e}`,REGISTRY_CREATE_ADAPTER:e=>`/api/v1/registry/${e}/create-adapter`,DEPLOYMENT_CONFIG:e=>`/api/v1/deployment/config/${e}`,DEPLOYMENT_DEPLOY:"/api/v1/deployment/deploy",PLUGIN_SERVICES:"/api/v1/plugins",PLUGIN_REGISTER:"/api/v1/plugins",PLUGIN_HEALTH:e=>`/api/v1/plugins/${e}/health`,PLUGIN_UNREGISTER:e=>`/api/v1/plugins/${e}`,PLUGIN_SERVICES_BY_TYPE:e=>`/api/v1/plugins/type/${e}`,HEALTH:"/health",METRICS:"/metrics",DOCS:"/docs",SWAGGER_JSON:"/swagger.json"},c={DEFAULT_TIMEOUT:1e4,RETRY_ATTEMPTS:3,RETRY_DELAY:1e3,RATE_LIMITS:{MANAGEMENT:100,COMMUNICATION:1e3,HEALTH_CHECK:1/0},DEFAULT_HEADERS:{"Content-Type":"application/json",Accept:"application/json"},SSE_HEADERS:{Accept:"text/event-stream","Cache-Control":"no-cache"},WS_CONFIG:{protocols:["mcp-v1"],reconnectAttempts:5,reconnectDelay:2e3}},p=()=>{const e=!1;return{baseURL:n.MCP_GATEWAY,timeout:c.DEFAULT_TIMEOUT,headers:c.DEFAULT_HEADERS,retryAttempts:e?1:c.RETRY_ATTEMPTS,enableLogging:e,validateStatus:e=>e>=200&&e<300}},l=(e,t)=>`${e.replace(/\/$/,"")}${t}`,u=e=>l(n.MCP_GATEWAY,e)},3974:function(e,t,a){a.d(t,{K:function(){return n}});var r=a(9274),i=a(271),s=a(5100);function n(){const e=(0,r.ref)([]),t=(0,r.ref)(!1),a=(0,r.ref)(null);let n=null;const o=async()=>{t.value=!0,a.value=null;try{s.v.info("Loading adapters");const t=await i.adapterAPI.list();e.value=t,s.v.info("Adapters loaded",{count:t.length})}catch(r){a.value=r.message||"Failed to load adapters",s.v.error("Failed to load adapters",r)}finally{t.value=!1}},d=async r=>{t.value=!0,a.value=null;try{s.v.info("Creating adapter",{name:r.name,serverId:r.mcpServerId});const t=await i.adapterAPI.create(r);return e.value.push(t),s.v.info("Adapter created",{id:t.id,name:t.name}),t}catch(n){return a.value=n.message||"Failed to create adapter",s.v.error("Failed to create adapter",n),null}finally{t.value=!1}},c=()=>{n&&clearInterval(n),n=setInterval(()=>{o()},3e4),s.v.info("Started polling adapters")},p=()=>{n&&(clearInterval(n),n=null,s.v.info("Stopped polling adapters"))},l=async e=>{try{return s.v.info("Getting adapter",{id:e}),await i.adapterAPI.getAdapter(e)}catch(t){return s.v.error("Failed to get adapter",{id:e,error:t}),null}},u=async(r,n)=>{t.value=!0,a.value=null;try{s.v.info("Updating adapter",{id:r});const t=await i.adapterAPI.update(r,n),a=e.value.findIndex(e=>e.id===r);return a>=0&&(e.value[a]=t),s.v.info("Adapter updated",{id:r,name:t.name}),t}catch(o){return a.value=o.message||"Failed to update adapter",s.v.error("Failed to update adapter",{id:r,error:o}),null}finally{t.value=!1}},v=async r=>{t.value=!0,a.value=null;try{return s.v.info("Deleting adapter",{id:r}),await i.adapterAPI.deleteAdapter(r),e.value=e.value.filter(e=>e.id!==r),s.v.info("Adapter deleted",{id:r}),!0}catch(n){return a.value=n.message||"Failed to delete adapter",s.v.error("Failed to delete adapter",{id:r,error:n}),!1}finally{t.value=!1}},A=async r=>{t.value=!0,a.value=null;try{s.v.info("Syncing adapter capabilities",{id:r});const t=await i.adapterAPI.sync(r),a=e.value.findIndex(e=>e.id===r);return a>=0&&(e.value[a].capabilities=t,e.value[a].capabilities.lastRefreshed=(new Date).toISOString()),s.v.info("Adapter capabilities synced",{id:r}),t}catch(n){return a.value=n.message||"Failed to sync adapter capabilities",s.v.error("Failed to sync adapter capabilities",{id:r,error:n}),null}finally{t.value=!1}},g=t=>e.value.find(e=>e.id===t),y=t=>e.value.filter(e=>e.mcpServerId===t),E=e=>"ready"===e.status||"active"===e.status,h=e=>{switch(e){case"ready":case"active":return"text-success";case"error":case"failed":return"text-danger";case"pending":case"starting":return"text-warning";default:return"text-muted"}},R=e=>{switch(e){case"ready":return"Ready";case"active":return"Active";case"error":return"Error";case"failed":return"Failed";case"pending":return"Pending";case"starting":return"Starting";default:return"Unknown"}},f=e=>e.authentication?.required?(e.authentication?.type||"none").charAt(0).toUpperCase()+(e.authentication?.type||"none").slice(1):"None",S=e=>{const t=e.capabilities||{tools:[],resources:[],prompts:[],lastRefreshed:""};return{tools:t.tools?.length||0,resources:t.resources?.length||0,prompts:t.prompts?.length||0,lastRefreshed:t.lastRefreshed}};return{adapters:e,loading:t,error:a,loadAdapters:o,createAdapter:d,getAdapter:l,updateAdapter:u,deleteAdapter:v,syncAdapter:A,startPolling:c,stopPolling:p,getAdapterById:g,getAdaptersByServerId:y,isAdapterHealthy:E,getStatusClass:h,getStatusLabel:R,getAuthTypeLabel:f,getCapabilitiesSummary:S}}},5100:function(e,t,a){a.d(t,{v:function(){return i}});var r=a(4364);const i={info:(e,...t)=>r.info(`[SUSE AI] ${e}`,...t),warn:(e,...t)=>r.warn(`[SUSE AI] ${e}`,...t),error:(e,...t)=>r.error(`[SUSE AI] ${e}`,...t)}},5821:function(e,t,a){a.d(t,{y:function(){return d}});var r=a(4335),i=a(5100);function s(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e){var t=o(e,"string");return"symbol"==typeof t?t:t+""}function o(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class d{constructor(e){s(this,"api",void 0),s(this,"config",void 0),this.config=e,this.api=r.A.create({baseURL:e.baseURL||void 0,timeout:e.timeout,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}getBaseURL(){return this.api.defaults.baseURL}setupInterceptors(){this.api.interceptors.request.use(e=>{const t=this.getAuthHeaders();return t&&Object.assign(e.headers,t),e},e=>(i.v.error("Request interceptor error:",e),Promise.reject(e))),this.api.interceptors.response.use(e=>e,e=>{const t=this.handleError(e);return Promise.reject(t)})}getAuthHeaders(){const e=localStorage.getItem("suseai-auth-token");if(e)try{const t=JSON.parse(e);if(new Date(t.expiresAt)>new Date)return{Authorization:`Bearer ${t.token}`};localStorage.removeItem("suseai-auth-token")}catch(t){localStorage.removeItem("suseai-auth-token")}return null}setAuthToken(e){try{localStorage.setItem("suseai-auth-token",JSON.stringify(e))}catch(t){i.v.warn("Failed to store auth token:",t)}}clearAuthToken(){try{localStorage.removeItem("suseai-auth-token")}catch(e){i.v.warn("Failed to clear auth token:",e)}}async getAuthMode(){const e=await r.A.get(`${this.getBaseURL()}/auth/mode`,{timeout:this.config.timeout});return e.data}handleError(e){if(e.response){const{status:t,data:a}=e.response;return{code:a?.code||`HTTP_${t}`,message:a?.error||a?.message||`HTTP ${t} error`,details:a?.details,status:t}}return e.request?{code:"NETWORK_ERROR",message:"Network error - please check your connection",details:{originalError:e.message}}:{code:"UNKNOWN_ERROR",message:e.message||"An unexpected error occurred",details:{originalError:e}}}async request(e,t,a,r){try{const i={method:e,url:t,data:a,...r};!i.baseURL&&this.config.dynamicBaseURL&&(i.baseURL=this.config.dynamicBaseURL());const s=await this.api.request(i);return s.data}catch(i){throw i}}async get(e,t){return this.request("GET",e,void 0,t)}async post(e,t,a){return this.request("POST",e,t,a)}async put(e,t,a){return this.request("PUT",e,t,a)}async delete(e,t){return this.request("DELETE",e,void 0,t)}}},6359:function(e,t,a){a.d(t,{registryAPI:function(){return o}});var r=a(5821),i=a(5100),s=a(3894);class n extends r.y{constructor(e){super(e)}getAuthHeaders(){return null}updateBaseURL(){this.api.defaults.baseURL=s.Id.REGISTRY}async browse(e={}){try{i.v.info("Browsing MCP registry",{params:e});const t=new URLSearchParams;e.q&&t.append("q",e.q),e.category&&t.append("category",e.category),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString());const a=`${s.S$.REGISTRY_BROWSE}${t.toString()?`?${t.toString()}`:""}`,r=await this.get(a);i.v.info("Raw registry browse result type:",typeof r),i.v.info("Is array result?",Array.isArray(r)),i.v.info("Result length if array:",Array.isArray(r)?r.length:"N/A"),i.v.info("First server id if array:",Array.isArray(r)&&r.length>0?r[0].id:"N/A");let n=[],o=0,d=!1;if(!r)return i.v.warn("Invalid registry browse result: null or undefined",r),{servers:[],total:0,hasMore:!1};if(Array.isArray(r))n=r.map(e=>({id:e.id||e.name,name:e._meta?.about?.title||e._meta?.title||e.title||e.name,description:e._meta?.about?.description||e._meta?.description||e.description||e.about?.description,icon:e._meta?.about?.icon||e._meta?.icon||e.icon||e.about?.icon,about:{icon_url:e._meta?.about?.icon||e.about?.icon_url,title:e._meta?.about?.title||e.about?.title},type:e.type,tags:e.tags||e._meta?.tags||[],packages:e.packages||[],_meta:{source:e.source||"registry",userAuthRequired:!1,authType:"none",category:e._meta?.category||"general",tags:e._meta?.tags||[],hosted:e._meta?.hosted,requiresInstallation:e._meta?.requiresInstallation,transportType:e._meta?.transportType,validation_status:e._meta?.validation_status,badges:e._meta?.badges,config:e._meta?.config}})),o=n.length,d=!1,i.v.info("Registry returned raw array format, transformed to expected structure");else{if(!Array.isArray(r.servers))return i.v.warn("Invalid registry browse result structure",r),{servers:[],total:0,hasMore:!1};n=r.servers,o=r.total||n.length,d=r.hasMore||!1}return i.v.info("Registry browse completed",{count:n.length,total:o}),{servers:n,total:o,hasMore:d}}catch(t){throw i.v.error("Failed to browse registry",t),t}}async getServer(e){try{i.v.info("Getting server details",{id:e});const t=await this.get(s.S$.REGISTRY_DETAILS(e));return i.v.info("Server details retrieved from API",{id:e,name:t.name}),t}catch(t){throw i.v.error("Failed to get server details",{id:e,error:t}),t}}async reload(){try{i.v.info("Reloading MCP registry");const e=await this.post(s.S$.REGISTRY_SYNC_OFFICIAL);return i.v.info("Registry reload completed",e),e}catch(e){throw i.v.error("Failed to reload registry",e),e}}}const o=new n({baseURL:s.Id.REGISTRY,timeout:3e4,retries:3})}}]);
//# sourceMappingURL=suseai-rancher-ext-0.1.0.umd.min.318.js.map